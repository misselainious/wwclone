{"ast":null,"code":"import _defineProperty from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/src/pages/allwines.js\";\nimport React, { Component } from \"react\"; // import Container from \"../components/Container\";\n\nimport CheckboxSidebar from \"../components/CheckboxSidebar/CheckboxSidebar\";\nimport API from \"../utils/API\";\nimport { List } from \"../components/List\";\nimport { DataWine } from \"../components/DataWineTable\"; // import { Link } from \"react-router-dom\";\n\nimport { Grid, Responsive, Button, Header, Icon, Image, Menu, Segment, Sidebar } from \"semantic-ui-react\";\nimport Winecard from \"../components/WineCard\";\nimport SearchWines from \"../components/SearchWines\";\n\nvar Wines =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Wines, _Component);\n\n  function Wines() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Wines);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Wines)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      wines: [],\n      producerNames: [],\n      regionNames: [],\n      isLoading: false,\n      visible: false,\n      filters: {\n        countries: [],\n        colors: [],\n        regions: [],\n        producers: [],\n        female: []\n      }\n    };\n\n    _this.loadWines = function () {\n      _this.setState({\n        isLoading: true\n      });\n\n      API.getWines().then(function (res) {\n        _this.setState({\n          wines: res.data\n        });\n\n        var regionNames = [];\n        res.data.map(function (wine) {\n          if (!regionNames.includes(wine.Region)) {\n            regionNames.push(wine.Region);\n          }\n        });\n\n        _this.setState({\n          regionNames: regionNames\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.loadProducers = function () {\n      API.getProducers().then(function (res) {\n        var producerNames = [];\n        res.data.map(function (producer) {\n          producerNames.push(producer.Producer);\n        });\n\n        _this.setState({\n          producerNames: producerNames\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleFilterChange = function (event) {\n      // console.log('event.target', event.target);\n      if (event.target.checked) {\n        //define the selected filter\n        var selectedFilter = event.target.getAttribute(\"data-filter\");\n        var filterArray = _this.state.filters[selectedFilter];\n        filterArray.push(event.target.value); //the bug seems to come from set state, we're accidentally getting rid of all the other arrays\n        //we will need to use the previous state\n\n        var oldFilters = _this.state.filters;\n        oldFilters[selectedFilter] = filterArray;\n\n        _this.setState({\n          filters: oldFilters\n        });\n      } else {\n        var _filterArray = _this.state.filters[event.target.getAttribute(\"data-Filter\")].filter(function (elem) {\n          return elem !== event.target.value;\n        });\n\n        _this.setState({\n          filters: _objectSpread({}, _this.state.filters, _defineProperty({}, event.target.getAttribute(\"data-Filter\"), _filterArray))\n        });\n      }\n    };\n\n    _this.handleHideClick = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleShowClick = function () {\n      return _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleSidebarHide = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Wines, [{\n    key: \"componentDidMount\",\n    //onload we get all the wine and producer data\n    value: function componentDidMount() {\n      this.loadWines();\n      this.loadProducers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var mainStyle = {\n        marginLeft: \"250px\"\n      };\n      var countries = [\"Germany\", \"France\", \"Austria\", \"Spain\", \"Portugal\", \"Greece\"];\n      var colors = [\"RosÃ©\", \"White\", \"Red\", \"Sparkling\", \"Dessert\"];\n      var female = [\"Yes\"];\n      var regions = this.state.regionNames;\n      var producers = this.state.producerNames;\n      var visible = this.state.visible;\n      var filterElements = [{\n        filterType: \"countries\",\n        elements: countries\n      }, {\n        filterType: \"colors\",\n        elements: colors\n      }, {\n        filterType: \"regions\",\n        elements: regions\n      }, {\n        filterType: \"producers\",\n        elements: producers\n      }, {\n        filterType: \"female\",\n        elements: female\n      }]; //TODO Make the footer less wonky\n\n      var wineList = this.state.wines; // console.log(\"preWinelist\", wineList)\n      //this is a hacky way to access the wine data field given that each word is\n      //slightly different than the actual keyword\n\n      var wineFieldAdjuster = {\n        \"countries\": \"Country\",\n        \"regions\": \"Region\",\n        \"producers\": \"Producer\",\n        \"colors\": \"Color\",\n        \"female\": \"Female_Winemaker\" // filter by each keyword if the filter is selected\n\n      };\n      var _arr = [\"producers\", \"countries\", \"colors\", \"regions\", \"female\"];\n\n      var _loop = function _loop() {\n        var keyword = _arr[_i];\n        wineList = wineList.filter(function (wine) {\n          return _this2.state.filters[keyword].length === 0 || _this2.state.filters[keyword].includes(wine[wineFieldAdjuster[keyword]]);\n        });\n      };\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        _loop();\n      }\n\n      return React.createElement(Grid, {\n        columns: \"equal\",\n        style: {\n          marginTop: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Grid.Column, {\n        width: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Responsive, {\n        minWidth: 768,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Grid.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(SearchWines, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })), React.createElement(CheckboxSidebar, {\n        checkableArrays: filterElements,\n        handleFilterChange: this.handleFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }))), React.createElement(Responsive, {\n        maxWidth: 768,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(Grid.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(SearchWines, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(Grid.Row, {\n        style: {\n          marginTop: '40px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Button.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: visible,\n        onClick: this.handleShowClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Show sidebar\"), React.createElement(Button, {\n        disabled: !visible,\n        onClick: this.handleHideClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Hide sidebar\")), React.createElement(Sidebar.Pushable, {\n        as: Segment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        onHide: this.handleSidebarHide,\n        vertical: true,\n        visible: visible,\n        width: \"thin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), \"Home\"), React.createElement(Menu.Item, {\n        as: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"gamepad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), \"Games\"), React.createElement(Menu.Item, {\n        as: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"camera\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), \"Channels\")), React.createElement(Sidebar.Pusher, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Application Content\"), React.createElement(Image, {\n        src: \"/images/wireframe/paragraph.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })))))), wineList.length ? React.createElement(Grid, {\n        style: {\n          marginTop: '80px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, wineList.map(function (wine) {\n        return React.createElement(Winecard, {\n          header: wine.Wine,\n          region: wine.Region,\n          producer: wine.Producer,\n          country: wine.Country,\n          wineid: wine._id,\n          key: wine._id,\n          url: wine.URL,\n          Code: wine.Code,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        });\n      })) : React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, this.state.isLoading ? \"loading...\" : \"No results to display\"));\n    }\n  }]);\n\n  return Wines;\n}(Component);\n\nexport default Wines;","map":{"version":3,"sources":["/Users/elainecadman/Desktop/myHomeworks/WineWise/client/src/pages/allwines.js"],"names":["React","Component","CheckboxSidebar","API","List","DataWine","Grid","Responsive","Button","Header","Icon","Image","Menu","Segment","Sidebar","Winecard","SearchWines","Wines","state","wines","producerNames","regionNames","isLoading","visible","filters","countries","colors","regions","producers","female","loadWines","setState","getWines","then","res","data","map","wine","includes","Region","push","catch","err","console","log","loadProducers","getProducers","producer","Producer","handleFilterChange","event","target","checked","selectedFilter","getAttribute","filterArray","value","oldFilters","filter","elem","handleHideClick","handleShowClick","handleSidebarHide","mainStyle","marginLeft","filterElements","filterType","elements","wineList","wineFieldAdjuster","keyword","length","marginTop","Wine","Country","_id","URL","Code"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import Container from \"../components/Container\";\nimport CheckboxSidebar from \"../components/CheckboxSidebar/CheckboxSidebar\";\nimport API from \"../utils/API\";\nimport { List } from \"../components/List\";\nimport { DataWine } from \"../components/DataWineTable\";\n// import { Link } from \"react-router-dom\";\nimport { Grid, Responsive, Button, Header, Icon, Image, Menu, Segment, Sidebar } from \"semantic-ui-react\";\nimport Winecard from \"../components/WineCard\"\nimport SearchWines from \"../components/SearchWines\"\n\nclass Wines extends Component {\n  state = {\n    wines: [],\n    producerNames: [],\n    regionNames: [],\n    isLoading: false,\n    visible: false,\n\n    filters: {\n      countries: [],\n      colors: [],\n      regions: [],\n      producers: [],\n      female: []\n    }\n    \n  };\n  //onload we get all the wine and producer data\n\n\n  componentDidMount() {\n    \n    this.loadWines();\n    this.loadProducers();\n  }\n  loadWines = () => {\n    this.setState({\n      isLoading: true\n    })\n    API.getWines()\n      .then(res => {\n        this.setState({ wines: res.data })\n        let regionNames = []\n        res.data.map(wine => {\n          if (!regionNames.includes(wine.Region)) {\n            regionNames.push(wine.Region)\n          }\n        })\n        this.setState({ regionNames })\n      }\n      )\n      .catch(err => console.log(err));\n  };\n  loadProducers = () => {\n    API.getProducers()\n      .then(res => {\n        let producerNames = [];\n        res.data.map(producer => {\n          producerNames.push(producer.Producer)\n        })\n        this.setState({ producerNames })\n\n      }\n      )\n      .catch(err => console.log(err));\n  };\n\n  handleFilterChange = event => {\n    // console.log('event.target', event.target);\n    if (event.target.checked) {\n      //define the selected filter\n      const selectedFilter = event.target.getAttribute(\"data-filter\");\n      const filterArray = this.state.filters[selectedFilter];\n      filterArray.push(event.target.value);\n      //the bug seems to come from set state, we're accidentally getting rid of all the other arrays\n      //we will need to use the previous state\n      let oldFilters = this.state.filters\n      oldFilters[selectedFilter] = filterArray\n      this.setState({\n        filters: oldFilters\n      })\n    } else {\n      const filterArray = this.state.filters[event.target.getAttribute(\"data-Filter\")].filter(elem => elem !== event.target.value);\n      this.setState({\n        filters: {\n          ...this.state.filters,\n          [event.target.getAttribute(\"data-Filter\")]: filterArray\n        }\n      })\n    }\n  }\n\n  handleHideClick = () => this.setState({ visible: false })\n  handleShowClick = () => this.setState({ visible: true })\n  handleSidebarHide = () => this.setState({ visible: false })\n\n  render() {\n    const mainStyle = { marginLeft: \"250px\" }\n    const countries = [\"Germany\", \"France\", \"Austria\", \"Spain\", \"Portugal\", \"Greece\"]\n    const colors = [\"RosÃ©\", \"White\", \"Red\", \"Sparkling\", \"Dessert\"]\n    const female = [\"Yes\"]\n    const regions = this.state.regionNames;\n    const producers = this.state.producerNames;\n    const { visible } = this.state;\n    \n    const filterElements = [{\n      filterType: \"countries\",\n      elements: countries\n    }, {\n      filterType: \"colors\",\n      elements: colors\n    }, {\n      filterType: \"regions\",\n      elements: regions\n    }, {\n      filterType: \"producers\",\n      elements: producers\n    }, {\n      filterType: \"female\",\n      elements: female\n    }]\n    //TODO Make the footer less wonky\n    let wineList = this.state.wines\n    // console.log(\"preWinelist\", wineList)\n    //this is a hacky way to access the wine data field given that each word is\n    //slightly different than the actual keyword\n    const wineFieldAdjuster = { \"countries\": \"Country\", \"regions\": \"Region\", \"producers\": \"Producer\", \"colors\": \"Color\", \"female\": \"Female_Winemaker\" }\n    // filter by each keyword if the filter is selected\n    for (let keyword of [\"producers\", \"countries\", \"colors\", \"regions\", \"female\"]) {\n      wineList = wineList.filter(wine => {\n        return (\n          (this.state.filters[keyword].length === 0) ||\n          this.state.filters[keyword].includes(wine[wineFieldAdjuster[keyword]])\n        )\n      })\n    }\n\n    return (\n\n      <Grid columns='equal' style={{marginTop: \"50px\"}}>\n        {/*CheckboxSidebar renders with a double layered array*/}\n        <Grid.Column width={4}>\n      \n      <Responsive minWidth={768}>\n            <Grid.Row>\n              <SearchWines />\n            </Grid.Row>\n         \n            {/* <Grid.Row> */}\n              <CheckboxSidebar checkableArrays={filterElements} handleFilterChange={this.handleFilterChange} />\n            {/* </Grid.Row> */}\n            </Responsive>       \n          </Grid.Column>\n  \n\n        {/* For Mobile: */}\n            <Responsive maxWidth={768}>\n            <Grid.Row>\n            <SearchWines />\n            </Grid.Row>\n\n            <Grid.Row  style={{marginTop: '40px'}}>\n            <Button.Group>\n          <Button disabled={visible} onClick={this.handleShowClick}>\n            Show sidebar\n          </Button>\n          <Button disabled={!visible} onClick={this.handleHideClick}>\n            Hide sidebar\n          </Button>\n        </Button.Group>\n\n        <Sidebar.Pushable as={Segment}>\n          <Sidebar\n            as={Menu}\n            animation='overlay'\n            icon='labeled'\n            inverted\n            onHide={this.handleSidebarHide}\n            vertical\n            visible={visible}\n            width='thin'\n          >\n            <Menu.Item as='a'>\n              <Icon name='home' />\n              Home\n            </Menu.Item>\n            <Menu.Item as='a'>\n              <Icon name='gamepad' />\n              Games\n            </Menu.Item>\n            <Menu.Item as='a'>\n              <Icon name='camera' />\n              Channels\n            </Menu.Item>\n          </Sidebar>\n\n          <Sidebar.Pusher>\n            <Segment basic>\n              <Header as='h3'>Application Content</Header>\n              <Image src='/images/wireframe/paragraph.png' />\n            </Segment>\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n            </Grid.Row>\n            </Responsive>\n\n\n\n\n\n            {wineList.length ? (\n           \n                <Grid  style={{marginTop: '80px'}}>\n                 \n                    {wineList.map(wine => (\n                      <Winecard header={wine.Wine} region={wine.Region} producer={wine.Producer} country={wine.Country} wineid={wine._id} key={wine._id} url={wine.URL} Code={wine.Code} />\n                    ))}\n                  \n                </Grid>\n          \n            ) : (\n                <h3>{this.state.isLoading ? \"loading...\" : \"No results to display\"}</h3>\n              )}\n\n\n         \n    \n      </Grid>\n\n\n  )\n            }\n            }\nexport default Wines;\n"]},"metadata":{},"sourceType":"module"}