{"ast":null,"code":"import _defineProperty from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/elainecadman/Desktop/myHomeworks/WineWise/client/src/pages/allwines.js\";\nimport React, { Component } from \"react\";\nimport CheckboxSidebar from \"../components/CheckboxSidebar/CheckboxSidebar\";\nimport API from \"../utils/API\";\nimport { Grid, Header, Segment, Dimmer, Loader } from \"semantic-ui-react\";\nimport Winecard from \"../components/WineCard\";\nimport SearchWines from \"../components/SearchWines\";\n\nvar Wines =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Wines, _Component);\n\n  function Wines() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Wines);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Wines)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLoaded: false,\n      activeIndex: 0,\n      wines: [],\n      regionNames: [],\n      filters: {\n        countries: [],\n        colors: [],\n        regions: [],\n        farming: [],\n        female: []\n      }\n    };\n\n    _this.loadWines = function () {\n      _this.setState({\n        isLoaded: true\n      });\n\n      API.getWines().then(function (res) {\n        _this.setState({\n          wines: res.data\n        });\n\n        var regionNames = [];\n        res.data.map(function (wine) {\n          return !regionNames.includes(wine.Region) && regionNames.push(wine.Region);\n        });\n\n        _this.setState({\n          regionNames: regionNames,\n          isLoading: false\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleFilterChange = function (event) {\n      // console.log('event.target', event.target);\n      if (event.target.checked) {\n        //define the selected filter\n        var selectedFilter = event.target.getAttribute(\"data-filter\");\n        var filterArray = _this.state.filters[selectedFilter];\n        filterArray.push(event.target.value); //the bug seems to come from set state, we're accidentally getting rid of all the other arrays\n        //we will need to use the previous state\n\n        var oldFilters = _this.state.filters;\n        oldFilters[selectedFilter] = filterArray;\n\n        _this.setState({\n          filters: oldFilters\n        });\n      } else {\n        var _filterArray = _this.state.filters[event.target.getAttribute(\"data-Filter\")].filter(function (elem) {\n          return elem !== event.target.value;\n        });\n\n        _this.setState({\n          filters: _objectSpread({}, _this.state.filters, _defineProperty({}, event.target.getAttribute(\"data-Filter\"), _filterArray))\n        });\n      }\n    };\n\n    _this.handleClick = function (e, titleProps) {\n      var index = titleProps.index;\n      var activeIndex = _this.state.activeIndex;\n      var newIndex = activeIndex === index ? -1 : index;\n\n      _this.setState({\n        activeIndex: newIndex\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Wines, [{\n    key: \"componentDidMount\",\n    //onload we get all the wine and producer data\n    value: function componentDidMount() {\n      this.loadWines(); // this.loadProducers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          error = _this$state.error,\n          isLoaded = _this$state.isLoaded; // const mainStyle = { marginLeft: \"250px\" }\n\n      var wineAreaStyle = {\n        minHeight: \"100vh\"\n      };\n      var countries = [\"Germany\", \"France\", \"Austria\", \"Spain\", \"Portugal\", \"Greece\"];\n      var colors = [\"Rosé\", \"White\", \"Red\", \"Sparkling\", \"Dessert\"];\n      var female = [\"Female Winemaker\"];\n      var regions = this.state.regionNames; // const producers = this.state.producerNames;\n\n      var farming = [\"Sustainable\", \"Organic\", \"Certified Organic\", \"Bio-dynamic\", \"Certified Bio-dynamic\", \"HEV\"];\n      var filterElements = [{\n        filterType: \"countries\",\n        elements: countries\n      }, {\n        filterType: \"colors\",\n        elements: colors\n      }, {\n        filterType: \"regions\",\n        elements: regions\n      }, // {\n      //   filterType: \"producers\",\n      //   elements: producers\n      // }, \n      {\n        filterType: \"farming\",\n        elements: farming\n      }, {\n        filterType: \"female\",\n        elements: female\n      }]; //TODO Make the footer less wonky\n\n      var wineList = this.state.wines; // console.log(\"preWinelist\", wineList)\n      //this is a hacky way to access the wine data field given that each word is\n      //slightly different than the actual keyword\n\n      var wineFieldAdjuster = {\n        \"countries\": \"Country\",\n        \"regions\": \"Region\",\n        \"colors\": \"Color\",\n        \"farming\": \"Farming_practices\",\n        \"female\": \"Female_Winemaker\" // filter by each keyword if the filter is selected\n\n      };\n      var _arr = [\"countries\", \"colors\", \"regions\", \"farming\", \"female\"];\n\n      var _loop = function _loop() {\n        var keyword = _arr[_i];\n        wineList = wineList.filter(function (wine) {\n          return _this2.state.filters[keyword].length === 0 || _this2.state.filters[keyword].includes(wine[wineFieldAdjuster[keyword]]);\n        });\n      };\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        _loop();\n      }\n\n      if (error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Error: \", error.message);\n      } else if (!isLoaded) {\n        return React.createElement(Segment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(Dimmer, {\n          active: true,\n          inverted: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          inverted: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, \"Loading... \")));\n      } else {\n        return React.createElement(Grid, {\n          style: {\n            marginTop: '30px'\n          },\n          columns: 2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          width: 3,\n          style: {\n            marginTop: '40px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(SearchWines, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }), React.createElement(CheckboxSidebar, {\n          checkableArrays: filterElements,\n          handleFilterChange: this.handleFilterChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        })), React.createElement(Grid.Column, {\n          width: 12,\n          style: wineAreaStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          centered: true,\n          style: {\n            marginTop: '80px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, wineList.length ? React.createElement(Grid.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, wineList.map(function (wine) {\n          return React.createElement(Winecard, {\n            header: wine.Wine,\n            region: wine.Region,\n            country: wine.Country,\n            wineid: wine._id,\n            key: wine._id,\n            url: wine.URL,\n            Code: wine.Code,\n            producer: wine.Producer,\n            farming: wine.Farming_practices,\n            female: wine.Female_Winemaker,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          });\n        })) : React.createElement(Header, {\n          as: \"h3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, this.state.isLoading ? \"loading...\" : \"No wines meet your criteria\"))));\n      }\n    }\n  }]);\n\n  return Wines;\n}(Component);\n\nexport default Wines;","map":{"version":3,"sources":["/Users/elainecadman/Desktop/myHomeworks/WineWise/client/src/pages/allwines.js"],"names":["React","Component","CheckboxSidebar","API","Grid","Header","Segment","Dimmer","Loader","Winecard","SearchWines","Wines","state","isLoaded","activeIndex","wines","regionNames","filters","countries","colors","regions","farming","female","loadWines","setState","getWines","then","res","data","map","wine","includes","Region","push","isLoading","catch","err","console","log","handleFilterChange","event","target","checked","selectedFilter","getAttribute","filterArray","value","oldFilters","filter","elem","handleClick","e","titleProps","index","newIndex","error","wineAreaStyle","minHeight","filterElements","filterType","elements","wineList","wineFieldAdjuster","keyword","length","message","marginTop","Wine","Country","_id","URL","Code","Producer","Farming_practices","Female_Winemaker"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport CheckboxSidebar from \"../components/CheckboxSidebar/CheckboxSidebar\";\nimport API from \"../utils/API\";\nimport { Grid, Header, Segment, Dimmer, Loader } from \"semantic-ui-react\";\nimport Winecard from \"../components/WineCard\"\nimport SearchWines from \"../components/SearchWines\"\n\nclass Wines extends Component {\n  state = {\n    isLoaded: false,\n    activeIndex: 0,\n    wines: [],\n    \n    regionNames: [],\n\n    filters: {\n      countries: [],\n      colors: [],\n      regions: [],\n    \n      farming: [],\n      female: []\n    }\n  };\n  //onload we get all the wine and producer data\n\n  componentDidMount() {\n    \n    this.loadWines();\n    // this.loadProducers();\n  }\n  loadWines = () => {\n    this.setState({\n      isLoaded: true\n    })\n    API.getWines()\n      .then(res => {\n        this.setState({ wines: res.data })\n        let regionNames = []\n        res.data.map(wine => (!regionNames.includes(wine.Region)) && regionNames.push(wine.Region))\n        this.setState({ \n          regionNames,\n        isLoading: false })\n      }\n      )\n      .catch(err => console.log(err));\n  };\n  // loadProducers = () => {\n  //   API.getProducers()\n  //     .then(res => {\n  //       let producerNames = [];\n  //       res.data.map(producer => {\n  //         producerNames.push(producer.Producer)\n  //       })\n  //       this.setState({ producerNames })\n\n  //     }\n  //     )\n  //     .catch(err => console.log(err));\n  // };\n\n  handleFilterChange = event => {\n    // console.log('event.target', event.target);\n    if (event.target.checked) {\n      //define the selected filter\n      const selectedFilter = event.target.getAttribute(\"data-filter\");\n      const filterArray = this.state.filters[selectedFilter];\n      filterArray.push(event.target.value);\n      //the bug seems to come from set state, we're accidentally getting rid of all the other arrays\n      //we will need to use the previous state\n      let oldFilters = this.state.filters\n      oldFilters[selectedFilter] = filterArray\n      this.setState({\n        filters: oldFilters\n      })\n    } else {\n      const filterArray = this.state.filters[event.target.getAttribute(\"data-Filter\")].filter(elem => elem !== event.target.value);\n      this.setState({\n        filters: {\n          ...this.state.filters,\n          [event.target.getAttribute(\"data-Filter\")]: filterArray\n        }\n      })\n    }\n  }\n\n  handleClick = (e, titleProps) => {\n    const { index } = titleProps\n    const { activeIndex } = this.state\n    const newIndex = activeIndex === index ? -1 : index\n\n    this.setState({ activeIndex: newIndex })\n  }\n\n  render() {\n    const { error, isLoaded } = this.state;\n    // const mainStyle = { marginLeft: \"250px\" }\n    const wineAreaStyle= {minHeight:\"100vh\"};\n    const countries = [\"Germany\", \"France\", \"Austria\", \"Spain\", \"Portugal\", \"Greece\"]\n    const colors = [\"Rosé\", \"White\", \"Red\", \"Sparkling\", \"Dessert\"]\n    const female = [\"Female Winemaker\"]\n    const regions = this.state.regionNames;\n    // const producers = this.state.producerNames;\n    const farming = [\"Sustainable\", \"Organic\", \"Certified Organic\", \"Bio-dynamic\", \"Certified Bio-dynamic\", \"HEV\"];\n\n    \n    const filterElements = [{\n      filterType: \"countries\",\n      elements: countries\n    }, {\n      filterType: \"colors\",\n      elements: colors\n    }, {\n      filterType: \"regions\",\n      elements: regions\n    }, \n    // {\n    //   filterType: \"producers\",\n    //   elements: producers\n    // }, \n    {\n      filterType: \"farming\",\n      elements: farming\n    }, {\n      filterType: \"female\",\n      elements: female\n    }]\n    //TODO Make the footer less wonky\n    let wineList = this.state.wines\n    // console.log(\"preWinelist\", wineList)\n    //this is a hacky way to access the wine data field given that each word is\n    //slightly different than the actual keyword\n    const wineFieldAdjuster = { \"countries\": \"Country\", \"regions\": \"Region\", \"colors\": \"Color\", \"farming\": \"Farming_practices\", \"female\": \"Female_Winemaker\" }\n    // filter by each keyword if the filter is selected\n    for (let keyword of [\"countries\", \"colors\", \"regions\", \"farming\", \"female\"]) {\n      wineList = wineList.filter(wine => {\n        return (\n          (this.state.filters[keyword].length === 0) ||\n          this.state.filters[keyword].includes(wine[wineFieldAdjuster[keyword]])\n        )\n      })\n    }\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return   <Segment>\n      <Dimmer active inverted>\n        <Loader inverted>Loading... </Loader>\n      </Dimmer>\n    </Segment>\n    } else {\n    return (\n      <Grid style={{marginTop: '30px'}} columns={2}>\n        <Grid.Column width={3} style={{marginTop: '40px'}}>\n        <SearchWines />\n        <CheckboxSidebar checkableArrays={filterElements} handleFilterChange={this.handleFilterChange} />\n\n        </Grid.Column>\n   <Grid.Column width={12} style={wineAreaStyle}>\n      <Grid centered style={{marginTop: '80px'}}>\n        {/* { (wineList.length === 0) ? <h3>No results to display</h3> :(<h3>yes results</h3>)} */}\n        {wineList.length ? (\n           <Grid.Row >\n       \n                \n                 \n                    {wineList.map(wine => (\n                      <Winecard header={wine.Wine} region={wine.Region}  country={wine.Country} wineid={wine._id} key={wine._id} url={wine.URL} Code={wine.Code} producer={wine.Producer}  farming={wine.Farming_practices} female={wine.Female_Winemaker}/>\n                    ))}\n                  \n              \n                </Grid.Row>\n            ) : (\n                <Header as='h3'>{this.state.isLoading ? \"loading...\" : \"No wines meet your criteria\"}</Header>\n              )}\n\n      </Grid>\n      </Grid.Column>\n      </Grid>\n\n  )\n            }\n            }\n          }\nexport default Wines;\n"]},"metadata":{},"sourceType":"module"}